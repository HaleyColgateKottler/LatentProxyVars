---
title: "est lavaan"
format: html
---

```{r}
library(lavaan)
```

```{r}
# Load data
# mydata <- read.csv("mydata.csv")
A = read.csv("A_1.csv", header = FALSE)
Z = read.csv("Z_1.csv", header = FALSE)

mydata = Z
mydata$A = ordered(A$V1, levels = c(0, 1))
```

```{r}
# Specify factor-probit regression model
model <- '
efa("efa1")*h1 + 
efa("efa1")*h2 =~ V1+V2+V3+V4+V5+V6

A ~ h1 + h2

A | 0*t1
'
fit <- sem(model, data=mydata, ordered = "A")
summary(fit, standardized=TRUE)
inspect(fit, "partable")
lambda.est = inspect(fit,what="est")$lambda
theta.est = inspect(fit,what="est")$theta
psi.est = inspect(fit,what="est")$psi
beta.est = inspect(fit,what="est")$beta
nu.est = inspect(fit,what="est")$nu
alpha.est = inspect(fit,what="est")$alpha
tau.est = inspect(fit,what="est")$tau
delta.est = inspect(fit,what="est")$delta
```